function delete_board(event){event.preventDefault();var target_board=event.target.parentNode;var wrappers=document.getElementsByClassName('container_board');var board_to_del=document.getElementById('board_to_del');var target_html=target_board.children;for(var i=0;i<target_html.length;i++){if(target_html[i].tagName=='DIV'){board_to_del.innerHTML+=target_html[i].outerHTML;}}
var delete_container=document.getElementById('board_delete_confirm_modal');delete_container.style.display='block';document.body.style.overflow='hidden';var close_delete=document.getElementById('close_delete');var cancel_delete=document.getElementById('cancel_delete');var confirm_delete=document.getElementById('confirm_delete');close_delete.onclick=function close_modal(){delete_container.style.display='none';document.body.style.overflow='visible';board_to_del.innerHTML='';}
cancel_delete.onclick=function close_modal(){delete_container.style.display='none';document.body.style.overflow='visible';board_to_del.innerHTML='';}
confirm_delete.onclick=function(){document.onkeypress=null;delete_container.style.display='none';document.body.style.overflow='visible';board_to_del.innerHTML='';index_find:for(let i=0;i<=wrappers.length;i++){if(wrappers[i]==target_board){delete_board_api(i-1);target_board.remove();break index_find;}}}
document.onkeypress=function(e){e.preventDefault();if(!e.shiftKey&&e.keyCode==13){confirm_delete.onclick();}}
async function delete_board_api(board_id){var url='/api/board/delete';await axios({method:'DELETE',url:url,data:{'key':api_key,'board_id':boards_id.split(',')[board_id]}}).then(function(response){console.log(response.data);}).catch(function(error){console.log(error)});}};function edit_board(event){event.preventDefault();var target_board=event.target.parentNode;var edit_container=document.getElementById('board_edit_modal');var[title,description,submit]=edit_container.getElementsByClassName('form-group');var board_title=target_board.childNodes[3];title.childNodes[3].value=board_title.innerHTML.trim();var target_board_description=target_board.querySelectorAll('.container_board_description');var board_description=undefined;if(target_board_description.length>0){board_description=target_board_description[0];description.childNodes[3].value=target_board_description[0].innerHTML.trim().replace('<br>','\n');}
edit_container.style.display='block';document.body.style.overflow='hidden';var close=edit_container.getElementsByClassName('close')[0];close.onclick=function(){edit_container.style.display="none";document.body.style.overflow='visible';}
submit.onclick=function save_edit(){var board_description=undefined;if(target_board_description.length>0){board_description=target_board_description[0];}
document.onkeypress=null;console.log(description.childNodes[3].value);if(title.childNodes[3].value!=''){if(description.childNodes[3].value==''){if(board_description!==undefined){console.log('test1');target_board.removeChild(board_description);board_title.classList.remove('container_board_title');board_title.classList.add('container_board_only_title');}
else{console.log('test2');var board_description=document.createElement('div');board_description.classList.add('container_board_description');target_board.childNodes[3].after(board_description);board_description.innerHTML=description.childNodes[3].value;}}
else if(board_description==undefined){console.log('test3');board_title.classList.remove('container_board_only_title');board_title.classList.add('container_board_title');var board_description=document.createElement('div');board_description.classList.add('container_board_description');target_board.childNodes[3].after(board_description);board_description.innerHTML=description.childNodes[3].value;}
else{console.log('test4');board_description.innerHTML=description.childNodes[3].value;}
board_title.innerHTML=title.childNodes[3].value;edit_container.style.display="none";document.body.style.overflow='visible';var boards=document.getElementsByClassName('container_board');for(var id=0;id<boards.length;id++){if(boards[id]==target_board){edit_board_api(id-1);}}}}
document.onkeypress=function(e){if(!e.shiftKey&&e.keyCode==13){submit.onclick();}}
async function edit_board_api(board_id){var url='/api/board/update';await axios({method:'PUT',url:url,data:{'key':api_key,'board_id':boards_id.split(',')[board_id],'title':title.childNodes[3].value,'description':description.childNodes[3].value}}).then(function(response){console.log(response.data);}).catch(function(error){console.log(error)});}};